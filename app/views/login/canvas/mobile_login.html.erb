<%
# Copyright (C) 2011 - present Instructure, Inc.
#
# This file is part of Canvas.
#
# Canvas is free software: you can redistribute it and/or modify it under
# the terms of the GNU Affero General Public License as published by the Free
# Software Foundation, version 3 of the License.
#
# Canvas is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
# A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
# details.
#
# You should have received a copy of the GNU Affero General Public License along
# with this program. If not, see <http://www.gnu.org/licenses/>.
%>

<% js_bundle :mobile_login %>

<% extend Api::V1::Account %>

<div class="mobileLogin-Header">
  <span class="screenreader-only">
    <%= t 'Canvas by Instructure' %>
  </span>
</div>

<div id="login-forms">			
  <div class="sjtu-tabs">
    <div class="sjtu-tab" data-content="#guest-login">访客登录</div>
    <div class="sjtu-tab sjtu-active" data-content="#jaccount-login">jAccount登录</div>
  </div>

  <div id="jaccount-login" class="login-form active">
    <img src="/images/tim.jpg" alt=""/>
    <a class="Button Button--primary Button--block" href="http://baidu.com/">
      <%= t('log_in', 'Log In') %>
    </a>
  </div>

  <div id="guest-login" class="login-form">
    <%= form_for :pseudonym_session, :url => url_for({ action: :create }.merge(params.slice(:id).to_unsafe_h)), :html => {:id => "login_form", :class => "front face", :novalidate => 'novalidate', :autocomplete => "off" } do |f| %>
      <div class="ic-Form-control">
        <input
          class="ic-Input"
          autocomplete="off"
          autocorrect="off"
          placeholder="<%= @login_handle_name%>"
          type="<%= @login_handle_is_email ? 'email' : 'text' %>"
          name="pseudonym_session[unique_id]"
          value="<%= params[:pseudonym_session].try(:[], :unique_id) %>" >
      </div>
      <div class="ic-Form-control">
        <input
          class="ic-Input"
          type="password"
          name="pseudonym_session[password]"
          autocomplete="off"
          autocorrect="off"
          placeholder="<%= t :password, "Password" %>" />
      </div>
      <button
        type="submit"
        class="Button Button--primary Button--block"><%= t('log_in', 'Log In') %>
      </button>

      <% if request.post? && flash[:error] %>
        <div class="error"><%= flash[:error] %></div>
      <% end %>

    <% end %>
  </div>
</div>

<%= # for plugin use
  render "shared/login_trailer" %>
